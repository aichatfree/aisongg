(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[394],{59863:function(e,t,r){Promise.resolve().then(r.bind(r,21922)),Promise.resolve().then(r.bind(r,60526)),Promise.resolve().then(r.bind(r,83509)),Promise.resolve().then(r.bind(r,72644)),Promise.resolve().then(r.bind(r,2529))},86648:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(53403).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},82060:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(53403).Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])},63755:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(53403).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},3191:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(53403).Z)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]])},70217:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(53403).Z)("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]])},49694:function(e,t,r){"use strict";function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(null,arguments)}r.d(t,{g:function(){return a}})},21922:function(e,t,r){"use strict";r.d(t,{default:function(){return i}});var a=r(49694),n=r(2402),l=r(52750),o=r(70265),s=r(88070),i=(0,o.forwardRef)(function(e,t){let{defaultLocale:r,href:i,locale:c,localeCookie:u,onClick:d,prefetch:m,unprefixed:f,...h}=e,p=(0,s.Z)(),x=null!=c&&c!==p,b=c||p,g=function(){let[e,t]=(0,o.useState)();return(0,o.useEffect)(()=>{t(window.location.host)},[]),e}(),v=g&&f&&(f.domains[g]===b||!Object.keys(f.domains).includes(g)&&p===r&&!c)?f.pathname:i,y=(0,l.usePathname)();return x&&(m&&console.error("The `prefetch` prop is currently not supported when using the `locale` prop on `Link` to switch the locale.`"),m=!1),o.createElement(n.default,(0,a.g)({ref:t,href:v,hrefLang:x?c:void 0,onClick:function(e){(function(e,t,r,a){if(!e||!(a!==r&&null!=a)||!t)return;let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.pathname;return"/"===e?t:t.replace(e,"")}(t),{name:l,...o}=e;o.path||(o.path=""!==n?n:"/");let s="".concat(l,"=").concat(a,";");for(let[e,t]of Object.entries(o))s+="".concat("maxAge"===e?"max-age":e),"boolean"!=typeof t&&(s+="="+t),s+=";";document.cookie=s})(u,y,p,c),d&&d(e)},prefetch:m},h))})},60526:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var a=r(49694),n=r(52750),l=r(70265),o=r(88070);function s(e){return("object"==typeof e?null==e.host&&null==e.hostname:!/^[a-z]+:/i.test(e))&&!function(e){let t="object"==typeof e?e.pathname:e;return null!=t&&!t.startsWith("/")}(e)}function i(e,t){let r;return"string"==typeof e?r=c(t,e):(r={...e},e.pathname&&(r.pathname=c(t,e.pathname))),r}function c(e,t){let r=e;return/^\/(\?.*)?$/.test(t)&&(t=t.slice(1)),r+=t}r(28070);var u=r(21922);let d=(0,l.forwardRef)(function(e,t){let{href:r,locale:c,localeCookie:d,localePrefixMode:m,prefix:f,...h}=e,p=(0,n.usePathname)(),x=(0,o.Z)(),b=c!==x,[g,v]=(0,l.useState)(()=>s(r)&&("never"!==m||b)?i(r,f):r);return(0,l.useEffect)(()=>{p&&v(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;if(!s(e))return e;let l=a===n||a.startsWith("".concat(n,"/"));return(t!==r||l)&&null!=n?i(e,n):e}(r,c,x,p,f))},[x,r,c,p,f]),l.createElement(u.default,(0,a.g)({ref:t,href:g,locale:c,localeCookie:d},h))});d.displayName="ClientLink"},88070:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(52750),n=r(23276);let l="locale";function o(){let e;let t=(0,a.useParams)();try{e=(0,n.useLocale)()}catch(r){if("string"!=typeof(null==t?void 0:t[l]))throw r;e=t[l]}return e}},83509:function(e,t,r){"use strict";r.d(t,{default:function(){return o}});var a=r(49694),n=r(70265),l=r(20313);function o(e){let{locale:t,...r}=e;if(!t)throw Error("Failed to determine locale in `NextIntlClientProvider`, please provide the `locale` prop explicitly.\n\nSee https://next-intl.dev/docs/configuration#locale");return n.createElement(l.IntlProvider,(0,a.g)({locale:t},r))}},72644:function(e,t,r){"use strict";r.d(t,{default:function(){return y}});var a=r(61462),n=r(70265),l=r(86648),o=r(97711);function s(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("animate-pulse rounded-md bg-slate-900/10 dark:bg-slate-50/10",t),...r})}var i=r(93597),c=r(95180),u=r(41409),d=r(88362);let m=(0,r(53403).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var f=r(35201),h=r(49600),p=r(82060),x=r(63755),b=r(70217),g=r(3191);function v(e){let{audioUrl:t,title:r}=e,l=(0,n.useRef)(null),[o,s]=(0,n.useState)(!1),[i,c]=(0,n.useState)(0),[u,d]=(0,n.useState)(0),[m,f]=(0,n.useState)(1),[h,v]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=l.current;if(e)return e.addEventListener("loadedmetadata",()=>{d(e.duration)}),e.addEventListener("timeupdate",()=>{c(e.currentTime)}),()=>{e.removeEventListener("loadedmetadata",()=>{}),e.removeEventListener("timeupdate",()=>{})}},[]);let y=e=>"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0"));return(0,a.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-4 rounded-lg bg-gray-800 shadow-xl",children:[(0,a.jsx)("audio",{ref:l,src:t}),r&&(0,a.jsx)("div",{className:"text-lg font-semibold mb-4 text-white",children:r}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>{l.current&&(o?l.current.pause():l.current.play(),s(!o))},className:"p-2 rounded-full hover:bg-gray-700 text-white",children:o?(0,a.jsx)(p.Z,{className:"w-8 h-8"}):(0,a.jsx)(x.Z,{className:"w-8 h-8"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("input",{type:"range",min:0,max:u,value:i,onChange:e=>{let t=Number(e.target.value);l.current&&(l.current.currentTime=t,c(t))},className:" w-full h-2 rounded-full bg-gray-600 appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:hover:bg-blue-400 [&::-webkit-slider-thumb]:transition-colors [&::-moz-range-thumb]:appearance-none [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-blue-500 [&::-moz-range-thumb]:hover:bg-blue-400 [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:transition-colors [&::-webkit-slider-runnable-track]:rounded-full [&::-moz-range-track]:rounded-full relative ",style:{background:"linear-gradient(to right, #3b82f6 0%, #3b82f6 ".concat(i/u*100,"%, rgb(75 85 99) ").concat(i/u*100,"%, rgb(75 85 99) 100%)")}}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-300 mt-1",children:[(0,a.jsx)("span",{children:y(i)}),(0,a.jsx)("span",{children:y(u)})]})]}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-2 self-start pt-2",children:[(0,a.jsx)("button",{onClick:()=>{l.current&&(l.current.muted=!h,v(!h))},className:"p-1 rounded-full hover:bg-gray-700 text-white",children:h?(0,a.jsx)(b.Z,{className:"w-6 h-6"}):(0,a.jsx)(g.Z,{className:"w-6 h-6"})}),(0,a.jsx)("input",{type:"range",min:0,max:1,step:.1,value:m,onChange:e=>{let t=Number(e.target.value);l.current&&(l.current.volume=t,f(t),v(0===t))},className:" w-20 h-2 rounded-full bg-gray-600 appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:hover:bg-blue-400 [&::-webkit-slider-thumb]:transition-colors [&::-moz-range-thumb]:appearance-none [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-blue-500 [&::-moz-range-thumb]:hover:bg-blue-400 [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:transition-colors [&::-webkit-slider-runnable-track]:rounded-full [&::-moz-range-track]:rounded-full relative ",style:{background:"linear-gradient(to right, #3b82f6 0%, #3b82f6 ".concat(100*m,"%, rgb(75 85 99) ").concat(100*m,"%, rgb(75 85 99) 100%)")}})]})]})]})}function y(e){let{content:t}=e,{user:r,fetchUserInfo:o,userLoading:u}=(0,n.useContext)(i.S),[p,x]=(0,n.useState)(!1),[b,g]=(0,n.useState)(""),[y,j]=(0,n.useState)(!1),[k,N]=(0,n.useState)(!1),[C,P]=(0,n.useState)(!1),[z,Z]=(0,n.useState)(""),[O,S]=(0,n.useState)(""),E=(0,n.useRef)((0,d.createClientComponentClient)()),L=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?x(!0):"dragleave"===e.type&&x(!1)},R=async e=>{e.preventDefault(),e.stopPropagation(),x(!1);let t=e.dataTransfer.files;(null==t?void 0:t[0])&&await U(t[0])},D=async e=>{let t=e.target.files;(null==t?void 0:t[0])&&await U(t[0]),e.target.value=""},U=async e=>{N(!0);try{let t=new FormData;t.append("audio",e);let r=await fetch("https://uploadaudio.aisonggenerator.io",{method:"POST",body:t});if(!r.ok)throw Error("Upload failed with status: ".concat(r.status));let a=await r.json();a.url?(g(a.url),A(a.url)):h.Am.error("Failed to upload file")}catch(e){console.error(e.message),h.Am.error(e.message)}finally{N(!1)}},_=(e,t)=>{Z(e),S(t)},A=async e=>{if(!r){h.Am.error("Please login first");return}if(!function(e){try{return new URL(e),!0}catch(e){return!1}}(e)){h.Am.error("Please enter a valid URL");return}j(!0),Z(""),S("");try{var t;let a=await fetch("/api/vocal-removal",{method:"POST",body:JSON.stringify({audio_url:e,user_id:r.id})});if(!a.ok){h.Am.error("Failed to remove vocals, please try again later.");return}let n=await a.json();await w(E.current,null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.id,r.id,_)}catch(e){h.Am.error("Failed to remove vocals, please try again later.")}finally{o(),j(!1)}},F=async(e,t)=>{P(!0);try{let r=await fetch(e),a=await r.blob(),n=URL.createObjectURL(a),l=document.createElement("a");l.href=n,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)}catch(e){h.Am.error("Failed to download file")}finally{P(!1)}};return(0,a.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-4 space-y-6 min-h-screen",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-center mb-8  bg-gradient-to-r from-purple-400 via-pink-500 to-purple-600  bg-clip-text text-transparent  drop-shadow-[0_2px_2px_rgba(0,0,0,0.3)] animate-gradient-x hover:scale-105 transition-transform duration-300",children:t.title}),(0,a.jsxs)("div",{className:"relative w-full h-48 border-2 border-dashed rounded-lg\n          ".concat(p?"border-purple-500 bg-purple-500/10":"border-gray-600 bg-gray-800/50","\n          transition-all duration-200 ease-in-out"),onDragEnter:L,onDragLeave:L,onDragOver:L,onDrop:R,children:[(0,a.jsx)("input",{type:"file",accept:"audio/*",onChange:D,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[k?(0,a.jsx)(l.Z,{className:"w-12 h-12 text-gray-400 mb-4 animate-spin"}):(0,a.jsx)(m,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"text-lg text-gray-300 text-center mb-2",children:k?"Uploading...":"Drop or select audio file here"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 text-center",children:".wav, .mp3, .flac, .ogg, .opus, .sphere, .m4v, .avi, .mov"})]})]}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(f.I,{type:"url",placeholder:"Or paste audio URL here",value:b,onChange:e=>g(e.target.value),className:"w-full px-4 py-6 rounded-lg bg-gray-800 border border-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"})}),(0,a.jsx)("button",{className:"w-full text-center py-3 px-4 bg-gradient-to-r from-purple-400 via-pink-500 to-purple-600 font-medium rounded-lg transition duration-200 ease-in-out transform hover:scale-[1.02]",onClick:()=>A(b),disabled:y,children:y?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}),(0,a.jsx)("span",{className:"ml-2",children:"Processing..."})]}):"Remove Vocals"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 text-center",children:["Processing about 1 minutes. Removing vocals costs ",c.O3,"credits"]}),y&&(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("p",{className:"text-xl font-bold text-white mb-4",children:"Processing"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsx)(v,{audioUrl:b,title:"Original"}),(0,a.jsx)(s,{className:"h-[120px] w-full rounded-xl bg-gray-700"}),(0,a.jsx)(s,{className:"h-[120px] w-full rounded-xl bg-gray-700"})]})]}),z.length>0&&O.length>0&&(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Result"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)(v,{audioUrl:b,title:"Original"}),(0,a.jsx)("button",{onClick:()=>F(b,"original.mp3"),className:"text-sm text-purple-400 hover:text-purple-300 text-center",disabled:C,children:C?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"})," Downloading..."]}):"Download Original"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)(v,{audioUrl:z,title:"Vocals"}),(0,a.jsx)("button",{onClick:()=>F(z,"vocals.mp3"),className:"text-sm text-purple-400 hover:text-purple-300 text-center",disabled:C,children:C?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"})," Downloading..."]}):"Download Vocals"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)(v,{audioUrl:O,title:"Instrumental"}),(0,a.jsx)("button",{onClick:()=>F(O,"instrumental.mp3"),className:"text-sm text-purple-400 hover:text-purple-300 text-center",disabled:C,children:C?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"})," Downloading..."]}):"Download Instrumental"})]})]})]})]})}async function w(e,t,r,a){await new Promise(e=>setTimeout(e,5e3));for(let n=0;n<50;n++){let n=await fetch("/api/vocal-removal/".concat(t));if(!n.ok){console.error("pollPrediction error: ",await n.text()),h.Am.error("Failed to remove vocals, please try again later."),await (0,u.xi)(e,r,-c.O3);return}let{data:l}=await n.json();if("succeeded"===l.status){a(l.output.vocals,l.output.accompaniment);return}if("failed"===l.status){h.Am.error("Failed to remove vocals, please try again later. Error: "+l.error),await (0,u.xi)(e,r,-c.O3);return}await new Promise(e=>setTimeout(e,1e4))}await (0,u.xi)(e,r,-c.O3)}},35201:function(e,t,r){"use strict";r.d(t,{I:function(){return o}});var a=r(61462),n=r(70265),l=r(97711);let o=n.forwardRef((e,t)=>{let{className:r,type:n,...o}=e;return(0,a.jsx)("input",{type:n,className:(0,l.cn)("flex h-9 w-full rounded-md border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300",r),ref:t,...o})});o.displayName="Input"}},function(e){e.O(0,[8791,3808,9706,8949,9184,1473,2713,7410,2529,2484,9642,1744],function(){return e(e.s=59863)}),_N_E=e.O()}]);